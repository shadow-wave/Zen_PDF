<!DOCTYPE html>
<html lang="en" data-theme="light"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6IjdiNWFlNDg4ZGU5NDlkNmY0OGJhYzU1ZmMwYTE1NzJlZTJmNjExMzciLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNzUwMTE3OTcwMjAzMTEzNzcxMyIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2MwZjllYjIxMjg4NmY2ZjFfaW5kZXguaHRtbC04NzIifSwiZXhwIjoxNzcxOTU0OTY2LCJpYXQiOjE3NzE5NTEzNjYsImFsZyI6IlJTMjU2In0.euAZ6-_wGX1o3ESgROA3m12nStdfwWJ-08R2D63u8T6DU3rIuCG2n3AGWV9cHyCcoenM5bzGcgMRThpXaCzm7xxmHuvnoFVBf0J9jr5-KoRfWDtcNoDI0HhPwFXb49P8tcAAxn45fpurszn4Ji7rZNUXu1XyA8UEo_My5Ir1aO884Hd_bPltveLdBEMnDE4CJgU4fqmEzP0u7Ae88rspdpS37MDIpO5v5cfp528VNn0Sw9JeRTBcr5AOiSVoPI9QXl14lFUbCBQG2xsMlvixiHDC8fOG2ODiPt8lYmv85dyPqXxaQi9A0ek5UckYMjW9MBk3kT6BmblRl1QDmCbv6Q","c_c0f9eb212886f6f1_index.html-872")</script><script>(function(){'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
})();</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20","gemini-2.5-flash-preview-09-2025"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function(){'use strict';function a(){window.parent.postMessage({type:"interaction"},"*")}window.addEventListener("click",a,{capture:!0,passive:!0});window.addEventListener("touchstart",a,{capture:!0,passive:!0});window.addEventListener("keydown",a,{capture:!0,passive:!0});}).call(this);
</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen PDF - by Aravind o k</title>
    
    <!-- PWA Mobile Web App Configuration -->
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Embedded Web App Manifest for Android Installation -->
    <link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiWmVuIFBERiIsInNob3J0X25hbWUiOiJaZW4gUERGIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmOGZhZmMiLCJ0aGVtZV9jb2xvciI6IiM2MzY2ZjEiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhaaWRXSnZlRDBpTUNBd0RURXlJREl4TWlJKzVISmxZM1FnZDJsa0RIVWlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdjbWc5SWpFeE1pSWdabWxzYkQwaUl6Um1ORFpsTlNJdlBqeHdZWFJvSUdabWJHeDkibmRvYVhSbElpQmtQU0pOTXpjMExqWWdOVEU0TGpaak1USXVOUzB4TWk0MUlERXlMalV0TXpJdk9DQXdMVEExTGpOekxUSXlMakV0TkRVeUxqTWdNR3d0TXpJZ016SmpOVFEwTGpZdE1qZ3VMeXR4TWpRdE1qVXVMbUl0TVRjMkxqUWdNVFF1TWtNNU15NDBJRE16TlM0NUlEYzJMalVnTVRjMElEYzJMalVnTWpFMFl6QWdNeUF3TGpFZ01USXVNeUExT0M0M0lETXpMalVnTnprdU5Xd3pNQ0F5T1M0elkyMHhMalFnTmk0NExUSXVOaUExTXk0MkxUSXVOaUF5TVM0eVk6TXdBeU5DNDVJREV0TVM0eElEUTRJRE0zTGpFZ05qTXVPR010TVRJd01UZ3RNamt1T1NBeU9DNDFMVFE1TGpnZ016RmpMVGt1TnlBeExqSXRNVGMzTGpJZ09DNHpMVEU0TGpJZ01UZ3VNWG0xSUZBeE9DNDRJREUwTGpZZ01qQXVObU16TVM0eElEVS4ySUROekxqUXRNWTRwSURnMkxqZ3RNak11TkdNeU1TNDRMVEU0TGpjZ016UXVOaTBwSUR0TUM0MkxUY3lMak5qTUNBeE1DNDVMVEV1T1MwMk1TNDNMVFV1TlMwek1TNDViREkyTGpJdE1qVXVObU0wTXk0MkxUUXlMaklnTlRjdU55MHhNRFl1T0NBek5pNHpMVFEyTkRkbE16VWxMakl0TXpWeFpDSTBMSHhnUEM5emRtYysiLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCIsInB1cnBvc2UiOiJhbnkgbWFza2FibGUifV19">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- PDF-lib -->
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js" crossorigin="anonymous"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        theme: {
                            bg: 'var(--theme-bg)',
                            surface: 'var(--theme-surface)',
                            surfaceSolid: 'var(--theme-surface-solid)',
                            border: 'var(--theme-border)',
                            text: 'var(--theme-text)',
                            muted: 'var(--theme-text-muted)',
                            accent: 'var(--theme-accent)',
                            hover: 'var(--theme-accent-hover)',
                            light: 'var(--theme-accent-light)',
                            glow: 'var(--theme-glow)'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        /* --- REFINED THEME DEFINITIONS --- */
        :root, [data-theme="light"] {
            --theme-bg: #f8fafc; /* Soft pearl white */
            --theme-surface: rgba(255, 255, 255, 0.75);
            --theme-surface-solid: #ffffff;
            --theme-border: rgba(15, 23, 42, 0.06);
            --theme-text: #0f172a;
            --theme-text-muted: #64748b;
            --theme-accent: #6366f1; /* Indigo */
            --theme-accent-hover: #4f46e5;
            --theme-accent-light: rgba(99, 102, 241, 0.1);
            --theme-glow: rgba(99, 102, 241, 0.15);
        }

        [data-theme="dark"] {
            --theme-bg: #0b0f19; /* Deep cool obsidian */
            --theme-surface: rgba(30, 41, 59, 0.5);
            --theme-surface-solid: #1e293b;
            --theme-border: rgba(255, 255, 255, 0.08);
            --theme-text: #f8fafc;
            --theme-text-muted: #94a3b8;
            --theme-accent: #818cf8; /* Light Indigo */
            --theme-accent-hover: #6366f1;
            --theme-accent-light: rgba(129, 140, 248, 0.15);
            --theme-glow: rgba(129, 140, 248, 0.15);
        }

        [data-theme="midnight"] {
            --theme-bg: #120811; /* Deep plum/crimson night */
            --theme-surface: rgba(45, 20, 40, 0.5);
            --theme-surface-solid: #2d1428;
            --theme-border: rgba(244, 63, 94, 0.15);
            --theme-text: #fff1f2;
            --theme-text-muted: #fda4af;
            --theme-accent: #f43f5e; /* Rose */
            --theme-accent-hover: #e11d48;
            --theme-accent-light: rgba(244, 63, 94, 0.15);
            --theme-glow: rgba(244, 63, 94, 0.15);
        }

        [data-theme="forest"] {
            --theme-bg: #061711; /* Deep rich pine */
            --theme-surface: rgba(6, 78, 59, 0.4);
            --theme-surface-solid: #064e3b;
            --theme-border: rgba(52, 211, 153, 0.15);
            --theme-text: #ecfdf5;
            --theme-text-muted: #6ee7b7;
            --theme-accent: #10b981; /* Emerald */
            --theme-accent-hover: #059669;
            --theme-accent-light: rgba(16, 185, 129, 0.15);
            --theme-glow: rgba(16, 185, 129, 0.15);
        }

        body {
            background-color: var(--theme-bg);
            color: var(--theme-text);
            transition: background-color 0.6s ease, color 0.6s ease;
            -webkit-font-smoothing: antialiased;
            overflow: hidden;
        }

        /* Ambient Breathing Glow */
        @keyframes pulseGlow {
            0% { transform: scale(1) translate(0, 0); opacity: 0.6; }
            50% { transform: scale(1.1) translate(3%, 3%); opacity: 1; }
            100% { transform: scale(1) translate(0, 0); opacity: 0.6; }
        }

        body::before, body::after {
            content: ''; position: fixed; width: 60vw; height: 60vh;
            border-radius: 50%; filter: blur(120px);
            background: radial-gradient(circle, var(--theme-glow) 0%, transparent 60%);
            z-index: -1; pointer-events: none;
            animation: pulseGlow 12s ease-in-out infinite alternate;
        }
        body::before { top: -20%; left: -10%; }
        body::after { bottom: -20%; right: -10%; animation-delay: -6s; }

        /* Panels */
        .surface-glass {
            background: var(--theme-surface); backdrop-filter: blur(32px); -webkit-backdrop-filter: blur(32px);
            border: 1px solid var(--theme-border); box-shadow: 0 8px 32px -4px rgba(0,0,0,0.05);
            transition: background-color 0.6s ease, border-color 0.6s ease;
        }
        .surface-solid {
            background: var(--theme-surface-solid); border: 1px solid var(--theme-border);
            transition: background-color 0.6s ease, border-color 0.6s ease;
        }

        /* --- ROBUST PAGE NAVIGATION --- */
        .page { display: none; }
        .page.active { display: block; animation: fadeSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        @keyframes fadeSlideUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Interactive Elements */
        .tool-card { cursor: pointer; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid var(--theme-border); }
        .tool-card:hover {
            transform: translateY(-6px); border-color: var(--theme-accent);
            box-shadow: 0 20px 40px -8px rgba(0, 0, 0, 0.15), 0 0 25px var(--theme-glow);
        }
        .tool-card:hover .icon-box { background-color: var(--theme-accent); color: white; transform: scale(1.15) rotate(8deg); }

        /* Dropzone States */
        .dz-container { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .dz-area { transition: all 0.4s ease; }
        .dropzone-active .dz-area { border-color: var(--theme-accent); background-color: var(--theme-accent-light); transform: scale(1.02); }
        
        .dz-container.workspace-active { transform: scale(0.98); opacity: 0.9; }
        .dz-container.workspace-active .dz-area { height: 6rem; padding: 0 2rem; flex-direction: row; justify-content: flex-start; gap: 1.25rem; }
        .dz-container.workspace-active .dz-icon { font-size: 2rem; margin-bottom: 0; }
        .dz-container.workspace-active .dz-title { font-size: 1.125rem; }
        .dz-container.workspace-active .dz-subtitle { display: none; }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--theme-border); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--theme-text-muted); }

        /* Form Inputs */
        input[type="text"], input[type="number"] {
            background: var(--theme-bg); color: var(--theme-text); border: 1px solid var(--theme-border); transition: all 0.3s ease;
        }
        input:focus { border-color: var(--theme-accent) !important; box-shadow: 0 0 0 4px var(--theme-accent-light) !important; outline: none; }
        
        /* Buttons */
        .btn-primary {
            background-image: linear-gradient(135deg, var(--theme-accent) 0%, var(--theme-accent-hover) 100%);
            color: #ffffff; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 4px 15px var(--theme-glow);
        }
        .btn-primary:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 10px 25px var(--theme-glow); }
        .btn-primary:disabled {
            background: var(--theme-surface-solid); background-image: none;
            color: var(--theme-text-muted); border: 1px solid var(--theme-border);
            box-shadow: none; cursor: not-allowed; transform: none; opacity: 0.6;
        }

        .btn-secondary {
            background: var(--theme-surface-solid); color: var(--theme-text);
            border: 1px solid var(--theme-border); transition: all 0.3s ease;
        }
        .btn-secondary:hover { background: var(--theme-bg); border-color: var(--theme-text-muted); }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:Inter, sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.bottom-10{bottom:2.5rem}.left-1\/2{left:50%}.right-6{right:1.5rem}.top-0{top:0px}.top-6{top:1.5rem}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-0\.5{margin-bottom:0.125rem}.mb-1{margin-bottom:0.25rem}.mb-10{margin-bottom:2.5rem}.mb-16{margin-bottom:4rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:0.25rem}.mr-2{margin-right:0.5rem}.mr-3{margin-right:0.75rem}.mt-1{margin-top:0.25rem}.mt-12{margin-top:3rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-20{height:5rem}.h-24{height:6rem}.h-32{height:8rem}.h-48{height:12rem}.h-56{height:14rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[72px\]{height:72px}.h-full{height:100%}.h-screen{height:100vh}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-20{width:5rem}.w-24{width:6rem}.w-32{width:8rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-7xl{max-width:80rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-none{flex:none}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded-2xl{border-radius:1rem}.rounded-\[1\.5rem\]{border-radius:1.5rem}.rounded-\[2rem\]{border-radius:2rem}.rounded-\[3rem\]{border-radius:3rem}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-2{border-width:2px}.border-4{border-width:4px}.border-\[3px\]{border-width:3px}.border-\[6px\]{border-width:6px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\[\#10b981\]{--tw-border-opacity:1;border-color:rgb(16 185 129 / var(--tw-border-opacity, 1))}.border-\[\#6366f1\]{--tw-border-opacity:1;border-color:rgb(99 102 241 / var(--tw-border-opacity, 1))}.border-\[\#818cf8\]{--tw-border-opacity:1;border-color:rgb(129 140 248 / var(--tw-border-opacity, 1))}.border-\[\#f43f5e\]{--tw-border-opacity:1;border-color:rgb(244 63 94 / var(--tw-border-opacity, 1))}.border-theme-accent{border-color:var(--theme-accent)}.border-theme-border{border-color:var(--theme-border)}.border-theme-surface{border-color:var(--theme-surface)}.border-t-transparent{border-top-color:transparent}.bg-\[\#061711\]{--tw-bg-opacity:1;background-color:rgb(6 23 17 / var(--tw-bg-opacity, 1))}.bg-\[\#0b0f19\]{--tw-bg-opacity:1;background-color:rgb(11 15 25 / var(--tw-bg-opacity, 1))}.bg-\[\#120811\]{--tw-bg-opacity:1;background-color:rgb(18 8 17 / var(--tw-bg-opacity, 1))}.bg-\[\#f8fafc\]{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\/10{background-color:rgb(239 68 68 / 0.1)}.bg-theme-accent{background-color:var(--theme-accent)}.bg-theme-bg{background-color:var(--theme-bg)}.bg-theme-border{background-color:var(--theme-border)}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.from-theme-accent{--tw-gradient-from:var(--theme-accent) var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.p-10{padding:2.5rem}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-8{padding:2rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-8{padding-bottom:2rem}.pl-2{padding-left:0.5rem}.pr-5{padding-right:1.25rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-\[10px\]{font-size:10px}.text-\[9px\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-\[0\.2em\]{letter-spacing:0.2em}.tracking-\[0\.3em\]{letter-spacing:0.3em}.tracking-tight{letter-spacing:-0.025em}.tracking-widest{letter-spacing:0.1em}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-theme-accent{color:var(--theme-accent)}.text-theme-muted{color:var(--theme-text-muted)}.text-theme-text{color:var(--theme-text)}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.accent-theme-accent{accent-color:var(--theme-accent)}.opacity-0{opacity:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-red-500\/20{--tw-shadow-color:rgb(239 68 68 / 0.2);--tw-shadow:var(--tw-shadow-colored)}.backdrop-blur-xl{--tw-backdrop-blur:blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.selection\:bg-theme-accent *::selection{background-color:var(--theme-accent)}.selection\:text-white *::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\:bg-theme-accent::selection{background-color:var(--theme-accent)}.selection\:text-white::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-theme-accent:hover{border-color:var(--theme-accent)}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-theme-bg:hover{background-color:var(--theme-bg)}.hover\:text-theme-accent:hover{color:var(--theme-accent)}.hover\:text-theme-text:hover{color:var(--theme-text)}.hover\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:border-red-500:focus{--tw-border-opacity:1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.focus\:ring-red-500\/20:focus{--tw-ring-color:rgb(239 68 68 / 0.2)}.group:hover .group-hover\:-translate-x-1{--tw-translate-x:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:-translate-y-1{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:-translate-y-2{--tw-translate-y:-0.5rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:translate-y-0\.5{--tw-translate-y:0.125rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:rotate-12{--tw-rotate:12deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:scale-105{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:scale-110{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:text-theme-accent{color:var(--theme-accent)}.peer:checked ~ .peer-checked\:border-theme-accent{border-color:var(--theme-accent)}.peer:checked ~ .peer-checked\:text-theme-accent{color:var(--theme-accent)}@media (min-width: 640px){.sm\:col-span-2{grid-column:span 2 / span 2}.sm\:mb-20{margin-bottom:5rem}.sm\:block{display:block}.sm\:flex{display:flex}.sm\:hidden{display:none}.sm\:w-auto{width:auto}.sm\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.sm\:flex-row{flex-direction:row}.sm\:gap-6{gap:1.5rem}.sm\:gap-8{gap:2rem}.sm\:p-10{padding:2.5rem}.sm\:p-12{padding:3rem}.sm\:px-0{padding-left:0px;padding-right:0px}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-16{padding-top:4rem;padding-bottom:4rem}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.md\:text-6xl{font-size:3.75rem;line-height:1}}@media (min-width: 1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}}</style><style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:Inter, sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.bottom-10{bottom:2.5rem}.left-1\/2{left:50%}.right-6{right:1.5rem}.top-0{top:0px}.top-6{top:1.5rem}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-0\.5{margin-bottom:0.125rem}.mb-1{margin-bottom:0.25rem}.mb-10{margin-bottom:2.5rem}.mb-16{margin-bottom:4rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:0.25rem}.mr-2{margin-right:0.5rem}.mr-3{margin-right:0.75rem}.mt-1{margin-top:0.25rem}.mt-12{margin-top:3rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-screen{height:100vh}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-20{height:5rem}.h-24{height:6rem}.h-32{height:8rem}.h-48{height:12rem}.h-56{height:14rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[72px\]{height:72px}.h-full{height:100%}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-20{width:5rem}.w-24{width:6rem}.w-32{width:8rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-7xl{max-width:80rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-none{flex:none}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded-2xl{border-radius:1rem}.rounded-\[1\.5rem\]{border-radius:1.5rem}.rounded-\[2rem\]{border-radius:2rem}.rounded-\[3rem\]{border-radius:3rem}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-2{border-width:2px}.border-4{border-width:4px}.border-\[3px\]{border-width:3px}.border-\[6px\]{border-width:6px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\[\#10b981\]{--tw-border-opacity:1;border-color:rgb(16 185 129 / var(--tw-border-opacity, 1))}.border-\[\#6366f1\]{--tw-border-opacity:1;border-color:rgb(99 102 241 / var(--tw-border-opacity, 1))}.border-\[\#818cf8\]{--tw-border-opacity:1;border-color:rgb(129 140 248 / var(--tw-border-opacity, 1))}.border-\[\#f43f5e\]{--tw-border-opacity:1;border-color:rgb(244 63 94 / var(--tw-border-opacity, 1))}.border-theme-accent{border-color:var(--theme-accent)}.border-theme-border{border-color:var(--theme-border)}.border-theme-surface{border-color:var(--theme-surface)}.border-t-transparent{border-top-color:transparent}.bg-\[\#061711\]{--tw-bg-opacity:1;background-color:rgb(6 23 17 / var(--tw-bg-opacity, 1))}.bg-\[\#0b0f19\]{--tw-bg-opacity:1;background-color:rgb(11 15 25 / var(--tw-bg-opacity, 1))}.bg-\[\#120811\]{--tw-bg-opacity:1;background-color:rgb(18 8 17 / var(--tw-bg-opacity, 1))}.bg-\[\#f8fafc\]{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\/10{background-color:rgb(239 68 68 / 0.1)}.bg-theme-accent{background-color:var(--theme-accent)}.bg-theme-bg{background-color:var(--theme-bg)}.bg-theme-border{background-color:var(--theme-border)}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.from-theme-accent{--tw-gradient-from:var(--theme-accent) var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.p-10{padding:2.5rem}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-8{padding:2rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-8{padding-bottom:2rem}.pl-2{padding-left:0.5rem}.pr-5{padding-right:1.25rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-\[10px\]{font-size:10px}.text-\[9px\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-\[0\.2em\]{letter-spacing:0.2em}.tracking-\[0\.3em\]{letter-spacing:0.3em}.tracking-tight{letter-spacing:-0.025em}.tracking-widest{letter-spacing:0.1em}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-theme-accent{color:var(--theme-accent)}.text-theme-muted{color:var(--theme-text-muted)}.text-theme-text{color:var(--theme-text)}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.accent-theme-accent{accent-color:var(--theme-accent)}.opacity-0{opacity:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-red-500\/20{--tw-shadow-color:rgb(239 68 68 / 0.2);--tw-shadow:var(--tw-shadow-colored)}.backdrop-blur-xl{--tw-backdrop-blur:blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.selection\:bg-theme-accent *::selection{background-color:var(--theme-accent)}.selection\:text-white *::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\:bg-theme-accent::selection{background-color:var(--theme-accent)}.selection\:text-white::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-theme-accent:hover{border-color:var(--theme-accent)}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-theme-bg:hover{background-color:var(--theme-bg)}.hover\:text-theme-accent:hover{color:var(--theme-accent)}.hover\:text-theme-text:hover{color:var(--theme-text)}.hover\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:border-red-500:focus{--tw-border-opacity:1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.focus\:ring-red-500\/20:focus{--tw-ring-color:rgb(239 68 68 / 0.2)}.group:hover .group-hover\:-translate-x-1{--tw-translate-x:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:-translate-y-1{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:-translate-y-2{--tw-translate-y:-0.5rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:translate-y-0\.5{--tw-translate-y:0.125rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:rotate-12{--tw-rotate:12deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:scale-105{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:scale-110{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:text-theme-accent{color:var(--theme-accent)}.peer:checked ~ .peer-checked\:border-theme-accent{border-color:var(--theme-accent)}.peer:checked ~ .peer-checked\:text-theme-accent{color:var(--theme-accent)}@media (min-width: 640px){.sm\:col-span-2{grid-column:span 2 / span 2}.sm\:mb-20{margin-bottom:5rem}.sm\:block{display:block}.sm\:flex{display:flex}.sm\:hidden{display:none}.sm\:w-auto{width:auto}.sm\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.sm\:flex-row{flex-direction:row}.sm\:gap-6{gap:1.5rem}.sm\:gap-8{gap:2rem}.sm\:p-10{padding:2.5rem}.sm\:p-12{padding:3rem}.sm\:px-0{padding-left:0px;padding-right:0px}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-16{padding-top:4rem;padding-bottom:4rem}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.md\:text-6xl{font-size:3.75rem;line-height:1}}@media (min-width: 1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}}</style></head>
<body class="h-screen flex flex-col overflow-hidden selection:bg-theme-accent selection:text-white">

    <!-- Top Navigation Bar -->
    <header class="surface-glass sticky top-0 z-40 flex-none border-b border-theme-border">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            
            <!-- Logo & Brand -->
            <div class="flex items-center gap-3 cursor-pointer group" onclick="navigate('home')">
                <div class="w-11 h-11 rounded-2xl bg-gradient-to-br from-theme-accent to-theme-accent-hover text-white flex items-center justify-center shadow-lg shadow-theme-accent/30 transform transition group-hover:rotate-12 group-hover:scale-105">
                    <i class="fa-solid fa-feather-pointed text-xl"></i>
                </div>
                <div class="ml-1">
                    <h1 class="text-2xl font-black tracking-tight text-theme-text transition-colors group-hover:text-theme-accent leading-none">Zen PDF</h1>
                    <p class="text-[10px] uppercase tracking-[0.2em] text-theme-muted font-bold mt-1 leading-none">Browser Editor</p>
                </div>
            </div>

            <!-- Controls (Theme & Dev Name) -->
            <div class="flex items-center gap-4 sm:gap-6">
                <!-- Advanced Theme Switcher -->
                <div class="hidden sm:flex items-center gap-3 surface-solid px-3 py-2 rounded-full shadow-sm">
                    <button onclick="setTheme('light')" class="w-6 h-6 rounded-full bg-[#f8fafc] border-[3px] border-[#6366f1] hover:scale-110 transition-transform shadow-sm" title="Zen Blanc"></button>
                    <button onclick="setTheme('dark')" class="w-6 h-6 rounded-full bg-[#0b0f19] border-[3px] border-[#818cf8] hover:scale-110 transition-transform shadow-sm" title="Zen Obsidian"></button>
                    <button onclick="setTheme('midnight')" class="w-6 h-6 rounded-full bg-[#120811] border-[3px] border-[#f43f5e] hover:scale-110 transition-transform shadow-sm" title="Zen Crimson"></button>
                    <button onclick="setTheme('forest')" class="w-6 h-6 rounded-full bg-[#061711] border-[3px] border-[#10b981] hover:scale-110 transition-transform shadow-sm" title="Zen Pine"></button>
                </div>

                <!-- Install / Download App Button -->
                <button onclick="handleInstallOrDownload()" class="hidden sm:flex items-center justify-center w-10 h-10 rounded-full surface-solid border border-theme-border shadow-sm text-theme-muted hover:text-theme-accent hover:border-theme-accent transition-all group" title="Install App / Download Offline">
                    <i class="fa-solid fa-download text-sm group-hover:translate-y-0.5 transition-transform" id="nav-download-icon"></i>
                </button>

                <div class="w-px h-8 bg-theme-border hidden sm:block"></div>

                <!-- Dev Badge (Clickable) -->
                <div onclick="openDevCard()" class="flex items-center gap-3 surface-solid pl-2 pr-5 py-1.5 rounded-full shadow-sm group hover:border-theme-accent transition-all cursor-pointer hover:shadow-md">
                    <div class="w-8 h-8 rounded-full bg-theme-accent text-white flex items-center justify-center text-sm font-bold shadow-inner group-hover:scale-105 transition-transform">
                        A
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[9px] text-theme-muted font-black uppercase tracking-widest leading-none">Developer</span>
                        <span class="text-sm font-bold text-theme-text leading-tight group-hover:text-theme-accent transition-colors">Aravind o k</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto overflow-x-hidden relative" id="main-scroll">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-8 sm:py-16">

            <!-- ================= HOME DASHBOARD ================= -->
            <div id="page-home" class="page active">
                <div class="text-center max-w-3xl mx-auto mb-16 sm:mb-20">
                    <h2 class="text-5xl md:text-6xl font-black text-theme-text tracking-tight mb-6 leading-tight">What do you want to do?</h2>
                    <p class="text-xl text-theme-muted font-medium">Select a tool below to modify your PDF documents. Everything happens beautifully, securely, and instantly in your browser.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
                    <!-- Tool Cards -->
                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('merge')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-solid fa-object-group"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Merge PDFs</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Combine multiple PDF documents into a single, organized file. Drag to reorder perfectly.</p>
                    </div>

                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('split')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-solid fa-scissors"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Split &amp; Extract</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Pull specific pages out of your PDF to create a brand new, tailored document instantly.</p>
                    </div>

                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('delete')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-red-500/10 text-red-500 flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-solid fa-file-circle-minus"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Delete Pages</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Remove unwanted, sensitive, or blank pages from your document permanently and safely.</p>
                    </div>

                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('watermark')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-solid fa-stamp"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Add Watermark</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Stamp custom text (like CONFIDENTIAL) across all pages of your document beautifully.</p>
                    </div>

                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('img2pdf')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-regular fa-images"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Images to PDF</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Select multiple JPG or PNG images and seamlessly compile them into a single PDF album.</p>
                    </div>

                    <div class="tool-card surface-solid rounded-[2rem] p-8 flex flex-col items-start" onclick="navigate('rotate')">
                        <div class="icon-box w-16 h-16 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-6 transition-all duration-400">
                            <i class="fa-solid fa-rotate-right"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-theme-text mb-3">Rotate Pages</h3>
                        <p class="text-base text-theme-muted leading-relaxed">Fix upside-down or sideways pages by rotating them 90, 180, or 270 degrees.</p>
                    </div>
                </div>
                
                <!-- Mobile Install / Download Button -->
                <div class="mt-12 text-center sm:hidden">
                    <button onclick="handleInstallOrDownload()" class="btn-secondary px-8 py-4 rounded-2xl font-bold text-base shadow-md inline-flex items-center gap-3">
                        <i class="fa-solid fa-mobile-screen text-lg" id="mobile-download-icon"></i> <span id="mobile-download-text">Install App Offline</span>
                    </button>
                </div>
            </div>

            <!-- ================= TOOL PAGES TEMPLATE ================= -->
            
            <!-- 1. MERGE -->
            <div id="page-merge" class="page max-w-4xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Merge Documents</h2>
                </div>
                
                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6 border border-theme-border" id="cont-merge">
                    <div id="dropzone-merge" class="dz-area relative w-full h-56 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="merge-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" multiple="" accept="application/pdf">
                        <div class="dz-icon w-20 h-20 rounded-full bg-theme-accent-light text-theme-accent flex items-center justify-center text-3xl mb-4 group-hover:scale-110 group-hover:-translate-y-1 transition-transform"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                        <h3 class="dz-title text-xl font-bold text-theme-text">Click or drag PDF files here</h3>
                        <p class="dz-subtitle text-base text-theme-muted mt-2 font-medium">Select multiple files to combine them</p>
                    </div>
                </div>

                <div id="ws-merge" class="hidden">
                    <div id="merge-file-list" class="space-y-4 mb-8"></div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4 mt-8 pt-8 border-t border-theme-border">
                        <button onclick="clearWorkspace('merge')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Clear All</button>
                        <button onclick="processMerge()" id="btn-merge" class="btn-primary w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg" disabled="">
                            Merge &amp; Download <i class="fa-solid fa-wand-magic-sparkles"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 2. SPLIT -->
            <div id="page-split" class="page max-w-3xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Split &amp; Extract</h2>
                </div>

                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6" id="cont-split">
                    <div id="dropzone-split" class="dz-area relative w-full h-56 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="split-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="application/pdf">
                        <i class="dz-icon fa-regular fa-file-pdf text-5xl text-theme-accent mb-4 group-hover:-translate-y-2 transition-transform"></i>
                        <h3 class="dz-title font-bold text-theme-text text-xl">Select a PDF file</h3>
                        <p class="dz-subtitle text-base text-theme-muted mt-2 font-medium">to extract pages from</p>
                    </div>
                </div>

                <div id="ws-split" class="hidden">
                    <div class="surface-solid rounded-[2rem] p-8 sm:p-10 shadow-sm mb-8">
                        <div class="flex items-center gap-5 mb-8 pb-8 border-b border-theme-border">
                            <div class="w-14 h-14 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-2xl shrink-0"><i class="fa-solid fa-file-pdf"></i></div>
                            <div class="flex-1 min-w-0">
                                <h4 id="split-filename" class="font-bold text-theme-text text-xl truncate">doc.pdf</h4>
                                <p id="split-pagecount" class="text-base text-theme-muted font-medium">0 pages</p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-base font-bold text-theme-text mb-4">Pages to Extract</label>
                            <input type="text" id="split-range" placeholder="e.g., 1-5, 8, 11" class="w-full px-6 py-5 rounded-2xl text-xl font-medium transition-all shadow-inner">
                            <p class="text-sm text-theme-muted mt-4 font-medium"><i class="fa-solid fa-circle-info mr-2 text-theme-accent"></i> Use commas for specific pages, hyphens for ranges.</p>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4">
                        <button onclick="clearWorkspace('split')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Cancel</button>
                        <button onclick="processSplit()" id="btn-split" class="btn-primary w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg">
                            Extract to New PDF <i class="fa-solid fa-download"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 3. DELETE -->
            <div id="page-delete" class="page max-w-3xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Delete Pages</h2>
                </div>

                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6" id="cont-delete">
                    <div id="dropzone-delete" class="dz-area relative w-full h-56 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="delete-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="application/pdf">
                        <i class="dz-icon fa-solid fa-file-circle-minus text-5xl text-red-500 mb-4 group-hover:-translate-y-2 transition-transform"></i>
                        <h3 class="dz-title font-bold text-theme-text text-xl">Select a PDF file</h3>
                        <p class="dz-subtitle text-base text-theme-muted mt-2 font-medium">to remove pages from</p>
                    </div>
                </div>

                <div id="ws-delete" class="hidden">
                    <div class="surface-solid rounded-[2rem] p-8 sm:p-10 shadow-sm mb-8">
                        <div class="flex items-center gap-5 mb-8 pb-8 border-b border-theme-border">
                            <div class="w-14 h-14 rounded-2xl bg-red-500/10 text-red-500 flex items-center justify-center text-2xl shrink-0"><i class="fa-solid fa-file-pdf"></i></div>
                            <div class="flex-1 min-w-0">
                                <h4 id="delete-filename" class="font-bold text-theme-text text-xl truncate">doc.pdf</h4>
                                <p id="delete-pagecount" class="text-base text-theme-muted font-medium">0 pages</p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-base font-bold text-theme-text mb-4">Pages to Remove</label>
                            <input type="text" id="delete-range" placeholder="e.g., 2, 4-6" class="w-full px-6 py-5 rounded-2xl text-xl font-medium transition-all shadow-inner focus:border-red-500 focus:ring-red-500/20">
                            <p class="text-sm text-red-400 mt-4 font-bold"><i class="fa-solid fa-triangle-exclamation mr-2"></i> Selected pages will be permanently deleted.</p>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4">
                        <button onclick="clearWorkspace('delete')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Cancel</button>
                        <button onclick="processDelete()" id="btn-delete" class="w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg bg-red-500 hover:bg-red-600 text-white shadow-xl shadow-red-500/20 transition-all transform hover:-translate-y-1">
                            Delete &amp; Download <i class="fa-solid fa-trash-can"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 4. WATERMARK -->
            <div id="page-watermark" class="page max-w-3xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Add Watermark</h2>
                </div>

                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6" id="cont-watermark">
                    <div id="dropzone-watermark" class="dz-area relative w-full h-48 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="watermark-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="application/pdf">
                        <i class="dz-icon fa-solid fa-stamp text-5xl text-theme-accent mb-4 group-hover:-translate-y-2 transition-transform"></i>
                        <h3 class="dz-title font-bold text-theme-text text-xl">Select PDF to watermark</h3>
                    </div>
                </div>

                <div id="ws-watermark" class="hidden">
                    <div class="surface-solid rounded-[2rem] p-8 sm:p-10 shadow-sm mb-8">
                        <div class="flex items-center gap-4 mb-8 px-5 py-4 bg-theme-bg rounded-2xl border border-theme-border shadow-inner">
                            <i class="fa-solid fa-check-circle text-theme-accent text-xl shrink-0"></i> 
                            <span id="watermark-filename" class="font-bold text-theme-text text-lg truncate">doc.pdf</span>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                            <div class="sm:col-span-2">
                                <label class="block text-base font-bold text-theme-text mb-4">Watermark Text</label>
                                <input type="text" id="wm-text" value="CONFIDENTIAL" class="w-full px-6 py-5 rounded-2xl text-2xl font-black text-center tracking-[0.2em] uppercase transition-all shadow-inner">
                            </div>
                            <div>
                                <label class="block text-base font-bold text-theme-text mb-4">Text Size</label>
                                <input type="number" id="wm-size" value="60" min="10" max="150" class="w-full px-6 py-5 rounded-2xl text-xl font-medium transition-all shadow-inner">
                            </div>
                            <div>
                                <label class="block text-base font-bold text-theme-text mb-4">Style</label>
                                <label class="flex items-center justify-center h-[72px] border-2 border-theme-border rounded-2xl cursor-pointer hover:bg-theme-bg transition-colors shadow-sm">
                                    <input type="checkbox" id="wm-diagonal" checked="" class="w-6 h-6 accent-theme-accent mr-3">
                                    <span class="font-bold text-theme-text text-lg">Diagonal Layout</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4">
                        <button onclick="clearWorkspace('watermark')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Cancel</button>
                        <button onclick="processWatermark()" id="btn-watermark" class="btn-primary w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg">
                            Apply Watermark <i class="fa-solid fa-stamp"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 5. IMG TO PDF -->
            <div id="page-img2pdf" class="page max-w-4xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Images to PDF</h2>
                </div>

                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6" id="cont-img2pdf">
                    <div id="dropzone-img" class="dz-area relative w-full h-48 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="img-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" multiple="" accept="image/jpeg, image/png">
                        <i class="dz-icon fa-regular fa-images text-5xl text-theme-accent mb-4 group-hover:-translate-y-2 transition-transform"></i>
                        <h3 class="dz-title font-bold text-theme-text text-xl">Select JPG or PNG images</h3>
                        <p class="dz-subtitle text-base text-theme-muted mt-2 font-medium">Select multiple files</p>
                    </div>
                </div>

                <div id="ws-img2pdf" class="hidden">
                    <div id="img-file-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5 mb-8"></div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4 border-t border-theme-border pt-8">
                        <button onclick="clearWorkspace('img2pdf')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Clear All</button>
                        <button onclick="processImg2Pdf()" id="btn-img2pdf" class="btn-primary w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg">
                            Convert to PDF <i class="fa-solid fa-file-pdf"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 6. ROTATE -->
            <div id="page-rotate" class="page max-w-3xl mx-auto">
                <div class="flex items-center gap-4 mb-10">
                    <button onclick="navigate('home')" class="btn-secondary px-6 py-3 rounded-full font-bold flex items-center gap-2 text-sm shadow-sm group">
                        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Back
                    </button>
                    <h2 class="text-4xl font-black text-theme-text tracking-tight">Rotate Pages</h2>
                </div>

                <div class="dz-container surface-solid rounded-[2rem] p-2 shadow-sm mb-6" id="cont-rotate">
                    <div id="dropzone-rotate" class="dz-area relative w-full h-48 border-2 border-theme-border border-dashed rounded-[1.5rem] flex flex-col items-center justify-center cursor-pointer group hover:bg-theme-bg">
                        <input id="rotate-file-input" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="application/pdf">
                        <i class="dz-icon fa-solid fa-rotate-right text-5xl text-theme-accent mb-4 group-hover:-translate-y-2 transition-transform"></i>
                        <h3 class="dz-title font-bold text-theme-text text-xl">Select PDF to rotate</h3>
                    </div>
                </div>

                <div id="ws-rotate" class="hidden">
                    <div class="surface-solid rounded-[2rem] p-8 sm:p-10 shadow-sm mb-8">
                        <div class="flex items-center gap-4 mb-8 px-5 py-4 bg-theme-bg rounded-2xl border border-theme-border shadow-inner">
                            <i class="fa-solid fa-check-circle text-theme-accent text-xl shrink-0"></i> 
                            <span id="rotate-filename" class="font-bold text-theme-text text-lg truncate">doc.pdf</span>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-base font-bold text-theme-text mb-4">Rotation Angle</label>
                                <div class="flex gap-3">
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="rot-angle" value="90" class="peer sr-only" checked="">
                                        <div class="p-4 text-center rounded-2xl border-2 border-theme-border bg-theme-bg text-theme-text peer-checked:border-theme-accent peer-checked:bg-theme-accent-light peer-checked:text-theme-accent font-bold transition-all text-base shadow-sm">
                                            90 <i class="fa-solid fa-rotate-right ml-1"></i>
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="rot-angle" value="180" class="peer sr-only">
                                        <div class="p-4 text-center rounded-2xl border-2 border-theme-border bg-theme-bg text-theme-text peer-checked:border-theme-accent peer-checked:bg-theme-accent-light peer-checked:text-theme-accent font-bold transition-all text-base shadow-sm">
                                            180 <i class="fa-solid fa-arrows-up-down ml-1"></i>
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="rot-angle" value="270" class="peer sr-only">
                                        <div class="p-4 text-center rounded-2xl border-2 border-theme-border bg-theme-bg text-theme-text peer-checked:border-theme-accent peer-checked:bg-theme-accent-light peer-checked:text-theme-accent font-bold transition-all text-base shadow-sm">
                                            270 <i class="fa-solid fa-rotate-left ml-1"></i>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-base font-bold text-theme-text mb-4">Apply to Pages</label>
                                <input type="text" id="rotate-range" placeholder="e.g., all, or 1-3" value="all" class="w-full px-6 py-5 rounded-2xl text-xl font-medium transition-all shadow-inner">
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-end gap-4">
                        <button onclick="clearWorkspace('rotate')" class="btn-secondary w-full sm:w-auto px-8 py-4 rounded-2xl font-bold text-lg">Cancel</button>
                        <button onclick="processRotate()" id="btn-rotate" class="btn-primary w-full sm:w-auto px-10 py-4 rounded-2xl font-bold flex items-center justify-center gap-3 text-lg">
                            Apply Rotation <i class="fa-solid fa-rotate"></i>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Global Overlays -->
    
    <!-- Developer Info Modal/Card -->
    <div id="dev-card-modal" class="fixed inset-0 bg-theme-bg/80 backdrop-blur-xl z-50 flex-col items-center justify-center transition-opacity duration-300 opacity-0 hidden" onclick="closeDevCard(event)" style="opacity: 0;">
        <div class="surface-glass p-8 sm:p-10 rounded-[3rem] shadow-2xl border border-theme-border flex flex-col items-center max-w-sm w-full mx-4 transform scale-95 transition-transform duration-300 relative" onclick="event.stopPropagation()" style="transform: scale(0.95);">
            
            <button onclick="closeDevCard()" class="absolute top-6 right-6 w-12 h-12 rounded-full bg-theme-bg border border-theme-border hover:border-theme-accent text-theme-muted hover:text-theme-text flex items-center justify-center transition-colors shadow-sm">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
            
            <!-- Avatar -->
            <div class="w-32 h-32 rounded-full bg-gradient-to-br from-theme-accent to-theme-accent-hover text-white flex items-center justify-center text-6xl font-black shadow-2xl shadow-theme-accent/30 mb-6 border-4 border-theme-surface">
                A
            </div>
            
            <h3 class="text-4xl font-black text-theme-text mb-1 tracking-tight">Aravind o k</h3>
            <p class="text-sm text-theme-accent font-black mb-10 uppercase tracking-[0.3em]">Developer</p>

            <div class="w-full space-y-4">
                <!-- Email -->
                <a href="mailto:aravindok6@gmail.com" class="flex items-center gap-5 p-4 rounded-[1.5rem] surface-solid border border-theme-border hover:border-theme-accent hover:shadow-xl shadow-sm transition-all group text-theme-text transform hover:-translate-y-1">
                    <div class="w-14 h-14 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"><i class="fa-solid fa-envelope"></i></div>
                    <div class="flex flex-col min-w-0">
                        <span class="text-[10px] text-theme-muted font-black uppercase tracking-[0.2em] mb-0.5">Email</span>
                        <span class="text-base font-bold truncate">aravindok6@gmail.com</span>
                    </div>
                </a>
                
                <!-- GitHub -->
                <a href="https://github.com/Shadow-wave" target="_blank" class="flex items-center gap-5 p-4 rounded-[1.5rem] surface-solid border border-theme-border hover:border-theme-accent hover:shadow-xl shadow-sm transition-all group text-theme-text transform hover:-translate-y-1">
                    <div class="w-14 h-14 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"><i class="fa-brands fa-github"></i></div>
                    <div class="flex flex-col min-w-0">
                        <span class="text-[10px] text-theme-muted font-black uppercase tracking-[0.2em] mb-0.5">GitHub</span>
                        <span class="text-base font-bold truncate">github.com/Shadow-wave</span>
                    </div>
                </a>
                
                <!-- Phone -->
                <a href="tel:+916238291791" class="flex items-center gap-5 p-4 rounded-[1.5rem] surface-solid border border-theme-border hover:border-theme-accent hover:shadow-xl shadow-sm transition-all group text-theme-text transform hover:-translate-y-1">
                    <div class="w-14 h-14 rounded-2xl bg-theme-accent-light text-theme-accent flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"><i class="fa-solid fa-phone"></i></div>
                    <div class="flex flex-col min-w-0">
                        <span class="text-[10px] text-theme-muted font-black uppercase tracking-[0.2em] mb-0.5">Phone</span>
                        <span class="text-base font-bold truncate">+91 6238 291 791</span>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 flex flex-col gap-3 pointer-events-none items-center w-full px-4 sm:px-0 sm:w-auto"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-theme-bg/90 backdrop-blur-xl z-50 hidden flex-col items-center justify-center transition-opacity duration-300 opacity-0">
        <div class="surface-glass p-10 sm:p-12 rounded-[3rem] shadow-2xl border border-theme-border flex flex-col items-center max-w-sm w-full mx-4 transform scale-95 transition-transform duration-300">
            <div class="relative w-24 h-24 mb-8">
                <div class="absolute inset-0 border-[6px] border-theme-border rounded-full"></div>
                <div class="absolute inset-0 border-[6px] border-theme-accent rounded-full border-t-transparent animate-spin"></div>
                <i class="fa-solid fa-feather-pointed absolute inset-0 flex items-center justify-center text-theme-accent text-3xl"></i>
            </div>
            <h3 class="text-3xl font-black text-theme-text mb-3 text-center tracking-tight">Processing...</h3>
            <p class="text-lg text-theme-muted text-center font-medium" id="loading-text">Hang tight while we handle your file.</p>
        </div>
    </div>

    <!-- Application Logic -->
    <script>
        const { PDFDocument, rgb, degrees, StandardFonts } = PDFLib;

        const state = {
            currentView: 'home',
            merge: { files: [] },
            split: { file: null, doc: null, count: 0 },
            delete: { file: null, doc: null, count: 0 },
            watermark: { file: null, doc: null },
            img2pdf: { files: [] },
            rotate: { file: null, doc: null, count: 0 }
        };

        // --- Core UI & Navigation ---
        function setTheme(themeName) {
            document.documentElement.setAttribute('data-theme', themeName);
            localStorage.setItem('zenPdfTheme', themeName);
        }
        if(localStorage.getItem('zenPdfTheme')) setTheme(localStorage.getItem('zenPdfTheme'));

        // --- PWA Installation Logic ---
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('nav-download-icon').className = 'fa-solid fa-mobile-screen text-[15px] group-hover:translate-y-0.5 transition-transform';
            const mobileBtnText = document.getElementById('mobile-download-text');
            if(mobileBtnText) mobileBtnText.innerText = 'Install App to Home Screen';
        });

        function handleInstallOrDownload() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showToast('Installing Zen PDF...', 'success');
                    }
                    deferredPrompt = null;
                });
            } else {
                downloadAppHtml();
            }
        }

        function downloadAppHtml() {
            const htmlContent = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Zen_PDF.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('App file downloaded! You can use it offline.', 'success');
        }

        function navigate(viewId) {
            if (state.currentView === viewId) return;
            if (viewId === 'home') resetAllWorkspaces();

            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${viewId}`).classList.add('active');
            state.currentView = viewId;
            document.getElementById('main-scroll').scrollTo(0, 0);
        }

        function revealWorkspace(tool) {
            const container = document.getElementById(`cont-${tool}`);
            const workspace = document.getElementById(`ws-${tool}`);
            if (container) container.classList.add('workspace-active');
            if (workspace) workspace.classList.remove('hidden');
        }

        function clearWorkspace(tool) {
            const container = document.getElementById(`cont-${tool}`);
            const workspace = document.getElementById(`ws-${tool}`);
            if (container) container.classList.remove('workspace-active');
            if (workspace) workspace.classList.add('hidden');

            const input = document.getElementById(`${tool}-file-input`);
            if (input) input.value = '';

            if (tool === 'merge') {
                state.merge.files = [];
                document.getElementById('merge-file-list').innerHTML = '';
            } else if (tool === 'img2pdf') {
                state.img2pdf.files.forEach(f => URL.revokeObjectURL(f.previewUrl));
                state.img2pdf.files = [];
                document.getElementById('img-file-list').innerHTML = '';
            } else {
                state[tool].file = null;
                state[tool].doc = null;
                if(tool === 'watermark') document.getElementById('wm-text').value = 'CONFIDENTIAL';
                if(tool === 'rotate') document.getElementById('rotate-range').value = 'all';
                if(tool === 'split') document.getElementById('split-range').value = '';
                if(tool === 'delete') document.getElementById('delete-range').value = '';
            }
        }

        function resetAllWorkspaces() {
            ['merge', 'split', 'delete', 'watermark', 'img2pdf', 'rotate'].forEach(tool => clearWorkspace(tool));
        }

        // --- Developer Modal Logic ---
        function openDevCard() {
            const modal = document.getElementById('dev-card-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            void modal.offsetWidth;
            modal.style.opacity = '1';
            modal.querySelector('div').style.transform = 'scale(1)';
        }

        function closeDevCard(event) {
            if(event) event.stopPropagation();
            const modal = document.getElementById('dev-card-modal');
            modal.style.opacity = '0';
            modal.querySelector('div').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }, 300);
        }

        // --- Utilities ---
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const isSuccess = type === 'success';
            const icon = isSuccess ? '<i class="fa-solid fa-check text-white"></i>' : '<i class="fa-solid fa-xmark text-white"></i>';
            const bg = isSuccess ? 'bg-theme-accent' : 'bg-red-500';

            toast.className = `surface-solid border border-theme-border shadow-2xl rounded-full px-6 py-4 flex items-center gap-4 w-full sm:w-auto overflow-hidden animate-[fadeSlideUp_0.4s_ease-out_forwards] pointer-events-auto`;
            toast.innerHTML = `
                <div class="${bg} w-8 h-8 rounded-full flex items-center justify-center shrink-0 shadow-inner text-sm">${icon}</div>
                <span class="font-bold text-base text-theme-text truncate">${message}</span>
            `;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0'; toast.style.transform = 'translateY(15px) translateX(-50%)';
                toast.style.transition = 'all 0.4s ease';
                setTimeout(() => toast.remove(), 400);
            }, 3500);
        }

        function showLoading(text) {
            document.getElementById('loading-text').innerText = text;
            const overlay = document.getElementById('loading-overlay');
            overlay.classList.remove('hidden'); overlay.classList.add('flex');
            void overlay.offsetWidth;
            overlay.style.opacity = '1'; overlay.querySelector('div').style.transform = 'scale(1)';
        }

        function hideLoading() {
            const overlay = document.getElementById('loading-overlay');
            overlay.style.opacity = '0'; overlay.querySelector('div').style.transform = 'scale(0.95)';
            setTimeout(() => { overlay.classList.add('hidden'); overlay.classList.remove('flex'); }, 300);
        }

        function downloadBytes(bytes, filename) {
            const blob = new Blob([bytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = filename;
            document.body.appendChild(a); a.click(); document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function formatBytes(bytes) {
            if (!+bytes) return '0 B';
            const k = 1024, i = Math.floor(Math.log(bytes) / Math.log(k));
            return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${['B', 'KB', 'MB', 'GB'][i]}`;
        }

        function parsePageRange(rangeStr, maxPages) {
            if(!rangeStr || rangeStr.toLowerCase().trim() === 'all') return Array.from({length: maxPages}, (_, i) => i);
            const pages = new Set();
            rangeStr.split(',').forEach(part => {
                part = part.trim(); if (!part) return;
                if (part.includes('-')) {
                    let [start, end] = part.split('-').map(n => parseInt(n));
                    if (isNaN(start) || isNaN(end)) throw new Error('Invalid format');
                    start = Math.max(1, start); end = Math.min(maxPages, end);
                    if (start > end) throw new Error('Invalid sequence');
                    for (let i = start; i <= end; i++) pages.add(i - 1);
                } else {
                    let num = parseInt(part);
                    if (isNaN(num)) throw new Error('Invalid number');
                    if (num >= 1 && num <= maxPages) pages.add(num - 1);
                }
            });
            return Array.from(pages).sort((a, b) => a - b);
        }

        function setupDropzone(id, inputId, callback) {
            const dropzone = document.getElementById(id);
            const input = document.getElementById(inputId);
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => dropzone.addEventListener(eventName, e => {e.preventDefault(); e.stopPropagation();}, false));
            ['dragenter', 'dragover'].forEach(eventName => dropzone.addEventListener(eventName, () => dropzone.classList.add('dropzone-active'), false));
            ['dragleave', 'drop'].forEach(eventName => dropzone.addEventListener(eventName, () => dropzone.classList.remove('dropzone-active'), false));
            dropzone.addEventListener('drop', e => { input.files = e.dataTransfer.files; callback({ target: input }); }, false);
            input.addEventListener('change', callback);
        }

        // --- Core Tool Implementations ---

        // 1. Merge
        setupDropzone('dropzone-merge', 'merge-file-input', (e) => {
            const newFiles = Array.from(e.target.files).filter(f => f.type === 'application/pdf');
            if(newFiles.length < e.target.files.length) showToast('Only PDF files allowed', 'error');
            if(newFiles.length > 0) {
                state.merge.files = [...state.merge.files, ...newFiles];
                revealWorkspace('merge');
                renderMergeList();
            }
            e.target.value = '';
        });

        function renderMergeList() {
            const listEl = document.getElementById('merge-file-list');
            const btn = document.getElementById('btn-merge');
            listEl.innerHTML = '';
            btn.disabled = state.merge.files.length < 2;

            state.merge.files.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = "flex items-center justify-between p-5 surface-solid border border-theme-border rounded-[1.5rem] hover:border-theme-accent transition-all group";
                item.innerHTML = `
                    <div class="flex items-center gap-5 overflow-hidden flex-1">
                        <div class="bg-theme-bg border border-theme-border text-theme-text w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 font-bold text-base shadow-sm">${index + 1}</div>
                        <div class="flex flex-col min-w-0">
                            <span class="font-bold text-theme-text truncate text-base sm:text-lg">${file.name}</span>
                            <span class="text-sm text-theme-muted font-medium">${formatBytes(file.size)}</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity">
                        <button onclick="moveMergeFile(${index}, -1)" class="w-12 h-12 flex items-center justify-center text-theme-muted hover:text-theme-accent hover:bg-theme-accent-light rounded-2xl disabled:opacity-20 transition-colors" ${index === 0 ? 'disabled' : ''}><i class="fa-solid fa-arrow-up"></i></button>
                        <button onclick="moveMergeFile(${index}, 1)" class="w-12 h-12 flex items-center justify-center text-theme-muted hover:text-theme-accent hover:bg-theme-accent-light rounded-2xl disabled:opacity-20 transition-colors" ${index === state.merge.files.length - 1 ? 'disabled' : ''}><i class="fa-solid fa-arrow-down"></i></button>
                        <div class="w-px h-8 bg-theme-border mx-2"></div>
                        <button onclick="removeMergeFile(${index})" class="w-12 h-12 flex items-center justify-center text-red-400 hover:text-red-500 hover:bg-red-500/10 rounded-2xl transition-colors"><i class="fa-solid fa-xmark text-lg"></i></button>
                    </div>`;
                listEl.appendChild(item);
            });
        }
        function moveMergeFile(index, dir) {
            const nIdx = index + dir; if (nIdx < 0 || nIdx >= state.merge.files.length) return;
            [state.merge.files[index], state.merge.files[nIdx]] = [state.merge.files[nIdx], state.merge.files[index]];
            renderMergeList();
        }
        function removeMergeFile(index) {
            state.merge.files.splice(index, 1);
            if (state.merge.files.length === 0) clearWorkspace('merge');
            else renderMergeList();
        }
        async function processMerge() {
            if (state.merge.files.length < 2) return;
            showLoading('Stitching documents together...');
            try {
                const mergedPdf = await PDFDocument.create();
                for (let file of state.merge.files) {
                    const pdf = await PDFDocument.load(await file.arrayBuffer());
                    const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    pages.forEach(p => mergedPdf.addPage(p));
                }
                downloadBytes(await mergedPdf.save(), 'merged_document.pdf');
                showToast('Merged successfully!');
                navigate('home');
            } catch (err) { showToast('Failed. Document might be encrypted.', 'error'); }
            hideLoading();
        }

        // 2. Split
        setupDropzone('dropzone-split', 'split-file-input', async (e) => {
            const f = e.target.files[0]; if (!f || f.type !== 'application/pdf') { if(f) showToast('PDFs only', 'error'); return; }
            showLoading('Analyzing PDF...');
            try {
                state.split.doc = await PDFDocument.load(await f.arrayBuffer());
                state.split.file = f; state.split.count = state.split.doc.getPageCount();
                document.getElementById('split-filename').innerText = f.name;
                document.getElementById('split-pagecount').innerText = `${state.split.count} pages total`;
                document.getElementById('split-range').value = `1-${state.split.count}`;
                revealWorkspace('split');
            } catch (err) { showToast('Cannot read encrypted PDF.', 'error'); }
            hideLoading(); e.target.value = '';
        });
        async function processSplit() {
            let indices = [];
            try { indices = parsePageRange(document.getElementById('split-range').value, state.split.count); if (!indices.length) throw new Error("No pages selected."); } 
            catch (e) { showToast(e.message, 'error'); return; }

            showLoading('Extracting pages...');
            try {
                const newPdf = await PDFDocument.create();
                const pages = await newPdf.copyPages(state.split.doc, indices);
                pages.forEach(p => newPdf.addPage(p));
                downloadBytes(await newPdf.save(), `extracted_${state.split.file.name}`);
                showToast('Pages extracted!'); navigate('home');
            } catch (err) { showToast('Error extracting.', 'error'); }
            hideLoading();
        }

        // 3. Delete
        setupDropzone('dropzone-delete', 'delete-file-input', async (e) => {
            const f = e.target.files[0]; if (!f || f.type !== 'application/pdf') return;
            showLoading('Loading PDF...');
            try {
                state.delete.doc = await PDFDocument.load(await f.arrayBuffer());
                state.delete.file = f; state.delete.count = state.delete.doc.getPageCount();
                document.getElementById('delete-filename').innerText = f.name;
                document.getElementById('delete-pagecount').innerText = `${state.delete.count} pages total`;
                revealWorkspace('delete');
            } catch (err) { showToast('Encrypted PDF?', 'error'); }
            hideLoading(); e.target.value = '';
        });
        async function processDelete() {
            let indices = [];
            try { indices = parsePageRange(document.getElementById('delete-range').value, state.delete.count); if (!indices.length) throw new Error("No pages selected to delete."); } 
            catch (e) { showToast(e.message, 'error'); return; }

            showLoading('Trimming pages...');
            try {
                const freshDoc = await PDFDocument.load(await state.delete.file.arrayBuffer());
                indices.sort((a,b) => b - a).forEach(i => freshDoc.removePage(i));
                downloadBytes(await freshDoc.save(), `edited_${state.delete.file.name}`);
                showToast('Pages deleted!'); navigate('home');
            } catch (err) { showToast('Error deleting.', 'error'); }
            hideLoading();
        }

        // 4. Watermark
        setupDropzone('dropzone-watermark', 'watermark-file-input', async (e) => {
            const f = e.target.files[0]; if (!f || f.type !== 'application/pdf') return;
            state.watermark.file = f;
            document.getElementById('watermark-filename').innerText = f.name;
            revealWorkspace('watermark');
            e.target.value = '';
        });
        async function processWatermark() {
            const wmText = document.getElementById('wm-text').value.trim() || 'CONFIDENTIAL';
            const wmSize = parseInt(document.getElementById('wm-size').value) || 60;
            const isDiagonal = document.getElementById('wm-diagonal').checked;
            
            showLoading('Stamping Watermark...');
            try {
                const doc = await PDFDocument.load(await state.watermark.file.arrayBuffer());
                const font = await doc.embedFont(StandardFonts.HelveticaBold);
                doc.getPages().forEach(page => {
                    const { width, height } = page.getSize();
                    const textWidth = font.widthOfTextAtSize(wmText, wmSize);
                    const textHeight = font.heightAtSize(wmSize);
                    page.drawText(wmText, {
                        x: width / 2 - textWidth / 2, y: height / 2 - textHeight / 2,
                        size: wmSize, font: font, color: rgb(0.6, 0.6, 0.6), opacity: 0.25,
                        rotate: isDiagonal ? degrees(45) : degrees(0),
                    });
                });
                downloadBytes(await doc.save(), `watermarked_${state.watermark.file.name}`);
                showToast('Watermark applied!'); navigate('home');
            } catch (err) { showToast('Error applying watermark.', 'error'); }
            hideLoading();
        }

        // 5. Img2Pdf
        setupDropzone('dropzone-img', 'img-file-input', (e) => {
            const files = Array.from(e.target.files).filter(f => f.type.startsWith('image/'));
            if(files.length > 0) {
                files.forEach(f => { f.previewUrl = URL.createObjectURL(f); state.img2pdf.files.push(f); });
                revealWorkspace('img2pdf');
                renderImgList();
            }
            e.target.value = '';
        });
        function renderImgList() {
            const listEl = document.getElementById('img-file-list'); listEl.innerHTML = ''; 
            document.getElementById('btn-img2pdf').disabled = state.img2pdf.files.length === 0;
            state.img2pdf.files.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = "relative rounded-3xl overflow-hidden border-2 border-theme-border group aspect-square bg-theme-bg flex items-center justify-center shadow-sm";
                item.innerHTML = `
                    <img src="${file.previewUrl}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                    <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm">
                        <button onclick="removeImg(${index})" class="w-14 h-14 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-transform hover:scale-110 shadow-xl"><i class="fa-solid fa-trash-can text-lg"></i></button>
                    </div>
                `;
                listEl.appendChild(item);
            });
        }
        function removeImg(index) {
            URL.revokeObjectURL(state.img2pdf.files[index].previewUrl);
            state.img2pdf.files.splice(index, 1);
            if(state.img2pdf.files.length === 0) clearWorkspace('img2pdf');
            else renderImgList();
        }
        async function processImg2Pdf() {
            if (state.img2pdf.files.length === 0) return;
            showLoading('Compiling PDF...');
            try {
                const pdfDoc = await PDFDocument.create();
                for (let file of state.img2pdf.files) {
                    const bytes = await file.arrayBuffer();
                    let img = file.type === 'image/jpeg' ? await pdfDoc.embedJpg(bytes) : await pdfDoc.embedPng(bytes);
                    const page = pdfDoc.addPage([img.width, img.height]);
                    page.drawImage(img, { x: 0, y: 0, width: img.width, height: img.height });
                }
                downloadBytes(await pdfDoc.save(), 'images_converted.pdf');
                showToast('Converted successfully!'); navigate('home');
            } catch (err) { showToast('Error converting.', 'error'); }
            hideLoading();
        }

        // 6. Rotate
        setupDropzone('dropzone-rotate', 'rotate-file-input', async (e) => {
            const f = e.target.files[0]; if(!f || f.type !== 'application/pdf') return;
            showLoading('Reading PDF...');
            try {
                state.rotate.file = f; state.rotate.doc = await PDFDocument.load(await f.arrayBuffer()); state.rotate.count = state.rotate.doc.getPageCount();
                document.getElementById('rotate-filename').innerText = f.name; 
                revealWorkspace('rotate');
            } catch (e) { showToast('Cannot read PDF.', 'error'); }
            hideLoading(); e.target.value = '';
        });
        async function processRotate() {
            const ang = parseInt(document.querySelector('input[name="rot-angle"]:checked').value);
            let indices = [];
            try { indices = parsePageRange(document.getElementById('rotate-range').value, state.rotate.count); } catch (e) { showToast(e.message, 'error'); return; }
            showLoading('Rotating...');
            const doc = await PDFDocument.load(await state.rotate.file.arrayBuffer());
            const pages = doc.getPages();
            indices.forEach(i => pages[i].setRotation(degrees(pages[i].getRotation().angle + ang)));
            downloadBytes(await doc.save(), `rotated_${state.rotate.file.name}`);
            hideLoading(); showToast('Rotated successfully!'); navigate('home');
        }

    </script>

</body></html>
